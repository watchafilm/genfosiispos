/**
 * @description: This ruleset governs access to the Firestore database for the SipSwift drink ordering application. It enforces public read access to the drink menu and open access to orders.
 * @dataStructure:
 *   - /drinks/{drinkId}: Stores static drink menu data.
 *   - /orders/{orderId}: Stores customer orders.
 * @keySecurityDecisions:
 *   - Drink data is publicly readable to allow anyone to view the menu.
 *   - Order data is openly accessible (both read and write), so any user can create, update, or read orders.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read the drink menu.  Writes are not permitted.
     * @path /drinks/{drinkId}
     * @allow get, list: Public access to read the menu.
     * @deny create, update, delete: No one can create, update, or delete drinks via the client.
     * @principle: Public read access for menu data.
     */
    match /drinks/{drinkId} {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to read, create, update and delete orders.
     * @path /orders/{orderId}
     * @allow get, list, create, update, delete: Public access to read and write orders.
     * @principle: Open access for order data.
     */
    match /orders/{orderId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }
  }
}